// Copyright unknown. Did a few modification.

var helper={formatDateTime:function(e,t,n){var r="",i=10;if(e==null||e=="")return"";if(typeof e=="string"){var s=e.slice(0,10)+" "+e.slice(11,19);e=new Date(Date.parse(s.replace(/-/g,"/")))}switch(t){case"year":r=e.getFullYear()+"-01"+"-01"+" "+"00"+":00"+":00",i=4;break;case"month":r=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+".01"+" "+"00"+":00"+":00",i=7;break;case"day":r=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" "+"00"+":00"+":00",i=10;break;case"hour":r=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" "+this.dateAddZero(e.getHours().toString())+":00"+":00",i=13;break;case"minute":r=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" "+this.dateAddZero(e.getHours().toString())+":"+this.dateAddZero(e.getMinutes().toString())+":00",i=16;break;case"second":r=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" "+this.dateAddZero(e.getHours().toString())+":"+this.dateAddZero(e.getMinutes().toString())+":"+this.dateAddZero(e.getSeconds().toString()),i=19;break;case"SN":r=e.getFullYear()+this.dateAddZero((e.getMonth()+1).toString())+this.dateAddZero(e.getDate().toString())+this.dateAddZero(e.getHours().toString())+this.dateAddZero(e.getMinutes().toString())+this.dateAddZero(e.getSeconds().toString()),i=14;break;default:r=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" "+"00"+":00"+":00"}return n==="Date"?new Date(Date.parse(r.replace(/-/g,"/"))):n==="shortString"?r.slice(0,i):n==="tinyString"?r.slice(11,i):r},dateAddZero:function(e){return e="0"+e,e.length>=3?e.slice(1,3):e},calNByDateType:function(e,t){var n=new Date(e.valueOf()),r=1;return arguments[2]!==undefined&&(r=arguments[2]),t==="hour"?n.setHours(n.getHours()+r):t==="day"?n.setDate(n.getDate()+r):t==="month"?n.setMonth(n.getMonth()+r):t==="year"&&n.setFullYear(n.getFullYear()+r),n},getCurrentWeek:function(e){var t=[],n=e.getDay()==0?7:e.getDay();for(var r=1;r<=7;r++)t.push(this.calNByDateType(e,"day",r-n));return t},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return n!=null?unescape(n[2]):null},loopTree:function(e,t,n,r){r=r||"children";if(e[r]){for(var i=0;i<e[r].length;i++)helper.loopTree(e[r][i],t,n,r);(t=="all"||t=="parents")&&n(e)}else(t=="all"||t=="child")&&n(e)},serializeObject:function(e){var t={},n=e;for(var r=0;r<n.length;r++)t[n[r].name]!==undefined?(t[n[r].name].push||(t[n[r].name]=[t[n[r].name]]),t[n[r].name].push(n[r].value||"")):t[n[r].name]=n[r].value||"";return t},postToUrl:function(e,t){var n=document.createElement("form");for(var r in e)n.setAttribute(r,e[r]);for(var r in t){var i=document.createElement("input");i.setAttribute("type",r=="file"?"file":"hidden"),i.setAttribute("name",r),i.setAttribute("value",t[r]),n.appendChild(i)}document.body.appendChild(n),n.submit()}};