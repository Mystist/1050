// Copyright unknown. Did a few modification.

var helper={formatDateTime:function(e,t,r){var a="",n=10;if(null==e||""==e)return"";if("string"==typeof e){var o=e.slice(0,10)+" "+e.slice(11,19);e=new Date(Date.parse(o.replace(/-/g,"/")))}switch(t){case"year":a=e.getFullYear()+"-01-01 00:00:00",n=4;break;case"month":a=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+".01 00:00:00",n=7;break;case"day":a=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" 00:00:00",n=10;break;case"hour":a=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" "+this.dateAddZero(e.getHours().toString())+":00:00",n=13;break;case"minute":a=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" "+this.dateAddZero(e.getHours().toString())+":"+this.dateAddZero(e.getMinutes().toString())+":00",n=16;break;case"second":a=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" "+this.dateAddZero(e.getHours().toString())+":"+this.dateAddZero(e.getMinutes().toString())+":"+this.dateAddZero(e.getSeconds().toString()),n=19;break;case"SN":a=e.getFullYear()+this.dateAddZero((e.getMonth()+1).toString())+this.dateAddZero(e.getDate().toString())+this.dateAddZero(e.getHours().toString())+this.dateAddZero(e.getMinutes().toString())+this.dateAddZero(e.getSeconds().toString()),n=14;break;default:a=e.getFullYear()+"-"+this.dateAddZero((e.getMonth()+1).toString())+"-"+this.dateAddZero(e.getDate().toString())+" 00:00:00"}return"Date"===r?new Date(Date.parse(a.replace(/-/g,"/"))):"shortString"===r?a.slice(0,n):"tinyString"===r?a.slice(11,n):a},dateAddZero:function(e){return e="0"+e,e.length>=3?e.slice(1,3):e},calNByDateType:function(e,t){var r=new Date(e.valueOf()),a=1;return void 0!==arguments[2]&&(a=arguments[2]),"hour"===t?r.setHours(r.getHours()+a):"day"===t?r.setDate(r.getDate()+a):"month"===t?r.setMonth(r.getMonth()+a):"year"===t&&r.setFullYear(r.getFullYear()+a),r},getCurrentWeek:function(e){for(var t=[],r=0==e.getDay()?7:e.getDay(),a=1;7>=a;a++)t.push(this.calNByDateType(e,"day",a-r));return t},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t);return null!=r?unescape(r[2]):null},loopTree:function(e,t,r,a){if(a=a||"children",e[a]){for(var n=0;n<e[a].length;n++)helper.loopTree(e[a][n],t,r,a);("all"==t||"parents"==t)&&r(e)}else("all"==t||"child"==t)&&r(e)},serializeObject:function(e){for(var t={},r=e,a=0;a<r.length;a++)void 0!==t[r[a].name]?(t[r[a].name].push||(t[r[a].name]=[t[r[a].name]]),t[r[a].name].push(r[a].value||"")):t[r[a].name]=r[a].value||"";return t},postToUrl:function(e,t){var r=document.createElement("form");for(var a in e)r.setAttribute(a,e[a]);for(var a in t){var n=document.createElement("input");n.setAttribute("type","file"==a?"file":"hidden"),n.setAttribute("name",a),n.setAttribute("value",t[a]),r.appendChild(n)}document.body.appendChild(r),r.submit()}};